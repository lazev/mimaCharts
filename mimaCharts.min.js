!function t(){"use strict";var e=function(t){var e="";for(var o in t)e+=o+":"+t[o]+";";return e},o="http://www.w3.org/2000/svg",i="_mima_",n=function(){if(!document.getElementById(i+"sheet")){var t=document.createElement("style");t.id=i+"sheet",t.appendChild(document.createTextNode("                ."+i+"abs{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none}                ."+i+'sq:before{content:"";display:block;padding-top: 100%;}                .'+i+"dot{position:absolute;margin-left:-0.5%;border-radius:50%;min-width:4px;max-width:10px;}                ."+i+"pe{pointer-events: all}                ."+i+"tooltip{z-index:1;pointer-events:none;position:absolute;left:0;top:0;border-radius:4px;padding:4px;background-color:#000;color:white;box-shadow:0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24);transition: all 0.15s ease-out;}                ")),document.head.appendChild(t)}},s=function(t,e,o,i){return{x:t+o*Math.sin(i*Math.PI/180),y:e+o*Math.cos(i*Math.PI/180)}},a=[200,16,285],r={type:"donut",scale:{},ratio:1,scaleStart:0},t=function(t,l){l="object"!=typeof l?t:l,l="object"!=typeof l?[]:l,t="object"!=typeof t?{}:t,t.type1=(t.type||"")[0]||"",("b"===t.type1||"l"===t.type1)&&(t.ratio=.5);var d,p={config:t,data:l,dataref:{},series:0,getColorValue:function(t){return"hsla("+t.h+","+t.s+","+t.l+","+t.a+")"},getColor:function(t,e,o){var i={h:0,s:"100%",l:"64%",a:1};if(o){var n=50/e;i.h=o.h,i.l=24+Math.round(.5*n+n*t)+"%"}else if(t<a.length)i.h=a[t];else{var n=360/e;i.h=Math.round(.5*n+n*t)}return i.hsla=p.getColorValue(i),i},toolTip:function(t){var e,o=t.target?t.target.getAttribute("data-point"):null,e=p.dataref[1*o],n="mouseover"===t.type;if(e&&n){p.currentToolTip?p.currentToolTip.style.display="":(p.currentToolTip=document.createElement("div"),p.currentToolTip.className=i+"tooltip",p.chart.appendChild(p.currentToolTip));var s=p.chart.getBoundingClientRect(),a=document.body.scrollTop||document.documentElement.scrollTop,r=document.body.scrollLeft||document.documentElement.scrollLeft,l=t.pageX-(s.left+r),d=t.pageY-(s.top+a);p.currentToolTip.style.left=l+"px",p.currentToolTip.style.top=d+"px";e.toolTip?p.currentToolTip.innerHTML=e.toolTip||"":n=!1}else e||console.error("No dataref to id",o);n||p.currentToolTip&&(p.currentToolTip.style.display="none")}},h=function(e,o){e.info={level:o,lowest:"auto"!==t.scaleStart?t.scaleStart:void 0,sum:0,average:0,cx:50,cy:50,o_rad:40,i_rad:20},0===o&&(e.info.id=0)},c=function(e,o,i){e.parent=this,e.i=o,e.id=1*p.info.id,p.dataref[e.id]=e,p.info.id++,e.v||(e.v=0),h(e,this.info.level+1),this.info.sum+=e.v,(e.v>this.info.highest||"undefined"==typeof this.info.highest)&&(this.info.highest=e.v),"auto"===t.scaleStart&&(e.v<this.info.lowest||"undefined"==typeof this.info.lowest)&&(this.info.lowest=e.v),e.data&&e.data.forEach(c,e),o===i.length-1&&u(this.info,i)},f=function(t,e,o){t.percent_scale=t.v-this.info.lowest?100*((t.v-this.info.lowest)/this.info.highest):0,t.percent_series=this.info.sum&&t.v?t.v/this.info.sum*100:0,t.data&&t.data.forEach(f,t)},u=function(t,e){t.gap=10,t.gap_less=t.gap*(e.length+1),t.seriesIndex=1*p.series,t.average=t.sum?t.sum/e.length:0,t.color=p.getColor(t.seriesIndex,e.length,!1),p.series++},g=function(t,o,i){t.color=p.getColor(o,i.length,this.color?this.color:!1),t.node=document.createElement("div"),t.node.style.cssText=e({position:"absolute",width:(100-this.info.gap_less)/i.length+"%",top:0,bottom:0,left:this.info.gap*(o+1)+(100-this.info.gap_less)/i.length*o+"%"}),this.node.appendChild(t.node),t.data&&this.info.level!==p.config.dataLevel||(t.bar=document.createElement("div"),t.bar.style.cssText=e({position:"absolute","background-color":t.color.hsla,bottom:0,width:"100%","min-height":"1px",height:t.percent_scale+"%"}),t.node.appendChild(t.bar)),t.data&&t.data.forEach(g,t)},m=function(t,n,s){if(!t.data||this.info.level===p.config.dataLevel){t.color=this.info.color,t.dot=document.createElement("span"),t.dot.className=i+"dot "+i+"sq";var a=this.info.gap*(n+1)+(100-this.info.gap_less)/s.length*n,r=100-t.percent_scale,l=2;t.dot.style.cssText=e({left:a+"%",top:r+"%",margin:"-"+.5*l+"% 0 0 -"+.5*l+"%",width:l+"%","background-color":t.color.hsla}),p.node.appendChild(t.dot),n>0&&(t.line=document.createElementNS(o,"path"),t.line.setAttribute("d","M"+this.info.lastPoint.x+","+this.info.lastPoint.y+" "+a+","+r),t.line.setAttribute("stroke",t.color.hsla),t.line.setAttribute("stroke-width","0.5%"),p.svg.appendChild(t.line)),this.info.lastPoint={x:a,y:r}}t.data&&t.data.forEach(m,t)},v=function(t,e,n){t.color=p.getColor(e,n.length,this.color?this.color:!1),t.percent_decimal=t.percent_series?t.percent_series/100:0,t.deg_from=this.info.lastDegTo||0,t.deg_to=t.deg_from+360*t.percent_decimal,this.info.lastDegTo=1*t.deg_to,t.p1=s(this.info.cx,this.info.cy,this.info.i_rad,t.deg_from),t.p2=s(this.info.cx,this.info.cy,this.info.o_rad,t.deg_from),t.p3=s(this.info.cx,this.info.cy,this.info.o_rad,t.deg_to),t.p4=s(this.info.cx,this.info.cy,this.info.i_rad,t.deg_to),t.o_sweep=t.deg_to-t.deg_from>180?"0 1,0":"0 0,0",t.i_sweep=t.deg_to-t.deg_from>180?"0 1,1":"0 0,1",t.line=document.createElementNS(o,"path"),t.d="",t.percent_decimal>=1?(t.p3a=s(this.info.cx,this.info.cy,this.info.o_rad,.5*t.deg_to),t.p1a=s(this.info.cx,this.info.cy,this.info.i_rad,.5*t.deg_to),t.d="M"+t.p1.x+","+t.p1.y+" L"+t.p2.x+","+t.p2.y+" A"+this.info.o_rad+","+this.info.o_rad+" "+t.o_sweep+" "+t.p3a.x+","+t.p3a.y+" A"+this.info.o_rad+","+this.info.o_rad+" "+t.o_sweep+" "+t.p3.x+","+t.p3.y+" L"+t.p4.x+","+t.p4.y+" A"+this.info.i_rad+","+this.info.i_rad+" "+t.i_sweep+" "+t.p1a.x+","+t.p1a.y+" A"+this.info.i_rad+","+this.info.i_rad+" "+t.i_sweep+" "+t.p1.x+","+t.p1.y):t.d="M"+t.p1.x+","+t.p1.y+" L"+t.p2.x+","+t.p2.y+" A"+this.info.o_rad+","+this.info.o_rad+" "+t.o_sweep+" "+t.p3.x+","+t.p3.y+" L"+t.p4.x+","+t.p4.y+" A"+this.info.i_rad+","+this.info.i_rad+" "+t.i_sweep+" "+t.p1.x+","+t.p1.y,t.line.setAttribute("d",t.d),t.line.setAttribute("class",i+"pe"),t.line.setAttribute("fill",t.color.hsla),t.line.setAttribute("stroke-width",1),t.line.setAttribute("stroke",t.color.hsla),t.line.setAttribute("data-point",t.id),t.toolTip=(t.label||"")+" "+Math.round(t.v)+" ("+Math.round(t.percent_series)+"%)",p.svg.appendChild(t.line)};for(d in r)"undefined"==typeof t[d]&&(p.config[d]=r[d]);if(h(p,0),p.chart=document.createElement("div"),p.chart.innerHTML='<div style="padding-top:'+100*t.ratio+'%"></div>',p.chart.style.cssText=e({position:"relative",display:"inline-block","box-sizing":"border-box",width:"100%","max-width":"100%",height:t.height+"px",outline:"1px solid #ccc"}),p.svg=document.createElementNS(o,"svg"),p.svg.setAttribute("viewBox","0 0 100 100"),p.svg.setAttribute("width","100%"),p.svg.setAttribute("height","100%"),p.svg.setAttribute("preserveAspectRatio","none"),p.svg.setAttribute("class",i+"abs"),p.chart.appendChild(p.svg),p.node=document.createElement("div"),p.node.className=i+"abs",p.chart.appendChild(p.node),p.data){p.data.forEach(c,p),p.data.forEach(f,p);var _=g;"line"===t.type?_=m:("pie"===t.type||"donut"===t.type)&&(_=v),p.data.forEach(_,p)}return p.chart.addEventListener("mouseover",p.toolTip),p.chart.addEventListener("mouseout",p.toolTip),console.log("chart",p),n(),p};"undefined"!=typeof module&&"undefined"!=typeof module.exports?module.exports=t:window.mimaChart=t}();